<html>
    <head>
        <script src="lib.js"></script>  
        <link rel="stylesheet" href="style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.3/seedrandom.min.js"></script>
        <script src="axios.js"></script>
        <script src="setup.js"></script>
        <script src="init.js"></script>
    </head>
    <body>
        <button id="test_new_trace" onclick='test_new_trace(document.getElementById("tx2").value,document.getElementById("tx").value)'>test new trace</button>
        <!-- <button id="init" onclick="lib_obj.setup();">setup sw</button> -->
        <button id="unreg" onclick="WRIT.unregister();">unregister sw</button>
        <button id="test_ww" onclick="ww();">test web worker</button>
        <!-- <button onclick="WRIT.end2end();">end to end</button> -->
        <button onclick="WRIT.timed_test();">vanilla vs protected time test</button>
        <br><br>Put your text here:<br>
        <textarea id="tx" rows="20" cols="40"></textarea>
        <br>
        <br>Number of functions:<br>
        <textarea id="tx2" rows="1" cols="5"></textarea>
        <br><br>
        <button id="post_text" onclick="post_text();">post text</button>
        <button id="trace" onclick='WRIT.trace_step(document.getElementById("tx2").value,post_text);'>traced post text</button>
    	<button id="post_text" onclick="perform_test();">make SW run of 50</button>
        <script>

        function perform_test(){
                var msg = "asdkj hdkjfgh klwdgj skljdg adj glkjadhglkj adslkjgblakjd gkaljgb lkjadsbgkl jsbdgkl jbs gkbvsflkvbkfsb vsa bvjkhs fhvbasdhv asdhv alksdbvlaskdbvlkasbdvlkdblkvbsadlkb lska blsablksanlbnsaldnlkajbdlkcnlsakjcnlkjadvlksjdvlkasjbdlkjasdlkjbslkjndvkjnsvkjsnkljvnskljvsakldlkjsdljnjGNSAKLJDGNSLKJADGLKJSGKLJDSBLGKJBDSKJGBSALDKJGBAKJDGLKJSDGKSJDGNAJDGNEWUJDBGKSEJBGVLRKJSBVLKJRSBDVUH42NWOEUHFRIURJKDVBPAIRUS asdkj hdkjfgh klwdgj skljdg adj glkjadhglkj adslkjgblakjd gkaljgb lkjadsbgkl jsbdgkl jbs gkbvsflkvbkfsb vsa bvjkhs fhvbasdhv asdhv alksdbvlaskdbvlkasbdvlkdblkvbsadlkb lska blsablksanlbnsaldnlkajbdlkcnlsakjcnlkjadvlksjdvlkasjbdlkjasdlkjbslkjndvkjnsvkjsnkljvnskljvsakldlkjsdljnjGNSAKLJDGNSLKJADGLKJSGKLJDSBLGKJBDSKJGBSALDKJGBAKJDGLKJSDGKSJDGNAJDGNEWUJDBGKSEJBGVLRKJSBVLKJRSBDVUH42NWOEUHFRIURJKDVBPAIRUS";
                const sleep = (milliseconds) => {
                          return new Promise(resolve => setTimeout(resolve, milliseconds))
                }
                for ( const x of Array(50).keys()){
                  sleep(2000 * x ).then(() => {

                          document.getElementById("tx").value = msg;
                          test_new_trace(document.getElementById("tx2").value, document.getElementById("tx").value);

                          //WRIT.trace_step(document.getElementById("tx2").value,post_text);
                          //post_text();
                  })


                }
        }
        </script>

    </body>
</html>
